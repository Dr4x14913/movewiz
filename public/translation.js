// translations.js
const translations = {
  en: {
    firstName: "First Name",
    lastName: "Last Name",
    email: "Email",
    eventName: "Event Name",
    comments: "Comments",
    commentsPlaceholder: "Comments that you want to add",
    theme: "Toggle theme",
    date: "Date",
    address: "Address",
    submit: "Create carpool",
    submitModify: "Modify carpool",
    errorTitle: "Error",
    required: "is required",
    invalidEmail: "Invalid email format",
    noResults: "No results found",
    errorFetching: "Error fetching data",
    toggleTheme: "Toggle Theme",
    successMessage: "Your unique URL that you can share: ",
    privateUrl: "Your private URL for edition: ",
    addressInputPlaceholder: "Start typing your address",
    address: "Address",
    mapHeader: "Select Address on Map",
    formTitle: "Enter Details",
    themeToggle: "Toggle Theme",
    modalClose: "Close",
    modalError: "Error",
    modalSuccess: "Success",
    modalSuccessMessage: "Your event was successfully submitted!",
    curLang: "EN",
    eventPageTitle: "Event Details - Movwiz",
    helpModalTitle: "Help",
    helpRegistrationInstructions: "How to register for the event:",
    helpRegistrationInstructions1: "Fill in the form with your first name, last name, email, etc.",
    helpRegistrationInstructions2: "All fields are required except <i>Phone number</i> and <i>Comments</i>.",
    helpRegistrationInstructions3: "Click <i>\"Register\"</i> or press <i>Enter</i> to submit.",
    helpRegistrationInstructions4: "If you don't want your email to be public, check <i>Hide my email</i>. The other participants will still be able to contact you through the website.",
    helpRegistrationInstructions5: "The Notify me feature allows you to choose whether you want to receive an email each time someone joins the event or not.",
    helpChoosingAddress: "Choosing a departure address:",
    helpChoosingAddress1: "Click on the map to select an address.",
    helpChoosingAddress2: "Or type an address and click the suggestions, it will place the ping on the map for you.",
    helpNotes: "Notes:",
    helpNotes1: "Click on any row in the table to zoom to that participant's location on the map.",
    helpNotes2: "Click on a marker to see the participant's details.",
    helpModalClose: "Close",
    contactModalTitle: "Contact Participant",
    contactFormSenderEmail: "Sender Email",
    contactFormMessage: "Message",
    contactFormCaptcha: "Captcha",
    contactFormCaptchaAnswer: "Captcha Answer",
    contactFormSend: "Send",
    contactModalClose: "Close",
    contactModalSuccess: "Message sent!",
    participantsTableTitle: "Participants",
    participantsTableFirstName: "First Name",
    participantsTableLastName: "Last Name",
    participantsTableEmail: "Email",
    participantsTableMode: "Mode",
    participantsTableRegistrationDate: "Registration Date",
    participantsTablePhone: "Phone",
    participantsTableLocation: "Location",
    participantsTableNoParticipants: "No participants registered yet.",
    editPageTitle: "Edit Event - Movwiz",
    editFormEventName: "Event Name",
    editFormFirstName: "First Name",
    editFormLastName: "Last Name",
    editFormEmail: "Email",
    editFormDatePicker: "Date Picker",
    editFormAddress: "Address",
    editFormComments: "Comments",
    editFormUpdate: "Update",
    editResultSuccess: "Event updated successfully!",
    editResultError: "Error updating event.",
    editMapTitle: "Map",
  },
  fr: {
    firstName: "Prénom",
    lastName: "Nom",
    email: "Email",
    eventName: "Nom de l'événement",
    comments: "Commentaires",
    commentsPlaceholder: "Un petit mot supplémentaire",
    theme: "Changer de thème",
    date: "Date",
    address: "Adresse",
    submit: "Créer le covoiturage",
    submitModify: "Modifier le covoiturage",
    errorTitle: "Erreur",
    required: "est requis",
    invalidEmail: "Format d'email invalide",
    noResults: "Aucun résultat trouvé",
    errorFetching: "Erreur lors de la récupération des données",
    toggleTheme: "Basculer le thème",
    successMessage: "Votre URL unique que vous pouvez partager : ",
    privateUrl: "Votre URL privée pour l'édition : ",
    addressInputPlaceholder: "Commencez à taper une adresse",
    address: "Adresse",
    mapHeader: "Sélectionnez l'adresse sur la carte",
    formTitle: "Entrez les détails",
    themeToggle: "Basculer le thème",
    modalClose: "Fermer",
    modalError: "Erreur",
    modalSuccess: "Succès",
    modalSuccessMessage: "Votre événement a été soumis avec succès !",
    curLang: "FR",
    eventPageTitle: "Détails de l'événement - Movwiz",
    helpModalTitle: "Aide",
    helpRegistrationInstructions: "Comment s'inscrire à l'événement:",
    helpRegistrationInstructions1: "Remplissez le formulaire avec votre prénom, votre nom, votre email, etc.",
    helpRegistrationInstructions2: "Tous les champs sont requis à l'exception du <i>Téléphone</i> et du <i>Commentaires</i>.",
    helpRegistrationInstructions3: "Cliquez sur <i>\"S'inscrire\"</i> ou appuyez sur <i>Entrée</i> pour soumettre.",
    helpRegistrationInstructions4: "Si vous ne souhaitez pas que votre email soit public, cochez <i>Cacher mon email</i>. Les autres participants pourront toujours vous contacter via le site.",
    helpRegistrationInstructions5: "La fonction \"Me notifier\" vous permet de choisir si vous souhaitez recevoir un email chaque fois qu'une personne s'inscrit à l'événement.",
    helpChoosingAddress: "Choisir une adresse de départ:",
    helpChoosingAddress1: "Cliquez sur la carte pour sélectionner une adresse.",
    helpChoosingAddress2: "Ou entrez une adresse et cliquez sur les suggestions, elle placera le ping sur la carte pour vous.",
    helpNotes: "Remarques:",
    helpNotes1: "Cliquez sur n'importe quelle ligne du tableau pour zoomer sur la localisation du participant sur la carte.",
    helpNotes2: "Cliquez sur un marqueur pour voir les détails du participant.",
    helpModalClose: "Fermer",
    contactModalTitle: "Contacter un participant",
    contactFormSenderEmail: "Email du destinataire",
    contactFormMessage: "Message",
    contactFormCaptcha: "Captcha",
    contactFormCaptchaAnswer: "Réponse au captcha",
    contactFormSend: "Envoyer",
    contactModalClose: "Fermer",
    contactModalSuccess: "Message envoyé !",
    participantsTableTitle: "Participants",
    participantsTableFirstName: "Prénom",
    participantsTableLastName: "Nom",
    participantsTableEmail: "Email",
    participantsTableMode: "Mode",
    participantsTableRegistrationDate: "Date d'inscription",
    participantsTablePhone: "Téléphone",
    participantsTableLocation: "Emplacement",
    participantsTableNoParticipants: "Aucun participant inscrit.",
    editPageTitle: "Éditer l'événement - Movwiz",
    editFormEventName: "Nom de l'événement",
    editFormFirstName: "Prénom",
    editFormLastName: "Nom",
    editFormEmail: "Email",
    editFormDatePicker: "Choisir une date",
    editFormAddress: "Adresse",
    editFormComments: "Commentaires",
    editFormUpdate: "Mettre à jour",
    editResultSuccess: "L'événement a été mis à jour avec succès !",
    editResultError: "Erreur lors de la mise à jour de l'événement.",
    editMapTitle: "Carte",
  }
};

// Detect user language
const userLang = navigator.language || navigator.userLanguage;
var lang = userLang.startsWith("fr") ? "fr" : "en";

function applyTranslations() {
  document.querySelectorAll("[data-translate]").forEach(el => {
    const key = el.getAttribute("data-translate");
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });

  // Handle input placeholders
  document.querySelectorAll("[data-translate-placeholder]").forEach(el => {
    const key = el.getAttribute("data-translate-placeholder");
    if (translations[lang][key]) {
      el.setAttribute("placeholder", translations[lang][key]);
    }
  });
}

// Language toggle function
function toggleLanguage() {
  lang = lang === "en" ? "fr" : "en";
  applyTranslations();
}

// Apply translations on load
document.addEventListener("DOMContentLoaded", () => {
  applyTranslations();
});
